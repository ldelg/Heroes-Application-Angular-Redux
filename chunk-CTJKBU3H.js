import{a as D,b as V}from"./chunk-GWY5MIWR.js";import{G as E}from"./chunk-QW74QWH4.js";import{b as T,d as g,e as k,f as q,h as G,i as R,j as z,k as A,m as L,n as B,o as v,q as $,r as J}from"./chunk-OC75TCOG.js";import"./chunk-FUCDREAG.js";import{$ as _,Fb as I,Jb as P,Ka as y,Ma as l,Ra as a,Sa as m,Ta as h,Tb as U,Vb as j,X as x,Xa as H,Y as M,_ as b,_a as f,ea as w,ib as O,jb as s,kb as u,lb as N,va as S,wa as o,xa as c}from"./chunk-JHQLZHCV.js";var K={main:[{label:"Name",placeholder:"Hero Name",controlName:"name"},{label:"Power",placeholder:"Hero Power",controlName:"power"},{label:"Universe",placeholder:"Hero Universe",controlName:"universe"}],description:{label:"Description (Optional)",placeholder:"Describe the hero",controlName:"description"}};function X(n,t){if(n&1&&(a(0,"div",13)(1,"mat-form-field",14)(2,"mat-label"),s(3),m(),h(4,"input",12),m()()),n&2){let F=t.$implicit;o(3),u(F.label),o(),l("formControlName",F.controlName)("placeholder",F.placeholder)}}var Q=(()=>{let t=class t{constructor(i,r,e,d){this.fb=i,this.router=r,this.heroesFacade=e,this.heroStateService=d,this.isEditMode=!1,this.uploadedImageUrl="https://cliparts.co/cliparts/Aib/raq/AibraqG8T.jpg",this.FormFields=K,this.currentHero=D}ngOnInit(){this.isEditMode=!!this.heroStateService.hero.name,this.isEditMode?(this.currentHero=this.heroStateService.hero,this.initializeForm(this.currentHero)):this.initializeForm()}ngOnDestroy(){this.heroStateService.clearHero()}initializeForm(i){this.heroForm=this.fb.group({name:[i?.name||"",g.required],power:[i?.power||"",g.required],universe:[i?.universe||"",g.required],image:[i?.image||this.uploadedImageUrl],description:[i?.description||""]})}onFileChanged(i){let r=new FileReader,e=i.target;if(e.files&&e.files.length>0){let d=e.files[0];r.onload=()=>{let p=r.result;this.heroForm.patchValue({image:p}),this.uploadedImageUrl=p},r.readAsDataURL(d)}}saveHero(){if(this.heroForm.valid){let i=this.heroForm.value;this.isEditMode?this.heroesFacade.editHero(this.currentHero.name,i):this.heroesFacade.addNewHero(i),this.router.navigate(["/heroes"])}}};t.\u0275fac=function(r){return new(r||t)(c(A),c(U),c(E),c(V))},t.\u0275cmp=x({type:t,selectors:[["hero-form"]],decls:19,vars:9,consts:[[1,"container"],[1,"sub-container"],[1,"image-preview"],["alt","Hero image",3,"src"],["type","file",3,"hidden","change"],["fileInput",""],["mat-stroked-button","",3,"click"],[3,"formGroup","ngSubmit"],[1,"hero-form"],["class","form-section",4,"ngFor","ngForOf"],["type","submit","mat-raised-button","","color","primary"],["appearance","fill",1,"d-flex","description"],["matInput","",3,"formControlName","placeholder"],[1,"form-section"],["appearance","fill"]],template:function(r,e){if(r&1){let d=H();a(0,"div",0)(1,"h2"),s(2),m(),a(3,"div",1)(4,"div",2),h(5,"img",3),a(6,"input",4,5),f("change",function(C){return e.onFileChanged(C)}),m(),a(8,"button",6),f("click",function(){b(d);let C=O(7);return _(C.click())}),s(9," Upload Image "),m()(),a(10,"form",7),f("ngSubmit",function(){return e.saveHero()}),a(11,"div",8),y(12,X,5,3,"div",9),a(13,"button",10),s(14),m()(),a(15,"mat-form-field",11)(16,"mat-label"),s(17),m(),h(18,"input",12),m()()()()}r&2&&(o(2),u(e.isEditMode?"Edit Hero":"Create New Hero"),o(3),l("src",e.isEditMode?e.currentHero.image:e.uploadedImageUrl,S),o(),l("hidden",!0),o(4),l("formGroup",e.heroForm),o(2),l("ngForOf",e.FormFields.main),o(2),N(" ",e.isEditMode?"Save Changes":"Create Hero"," "),o(3),u(e.FormFields.description.label),o(),l("formControlName",e.FormFields.description.controlName)("placeholder",e.FormFields.description.placeholder))},dependencies:[I,G,T,k,q,R,z,B,v,$],styles:[".container[_ngcontent-%COMP%]{padding:20px 60px;overflow-y:scroll;height:91vh;margin:0}@media (min-width: 600px){.container[_ngcontent-%COMP%]{height:auto;overflow-y:auto;padding:20px 0 20px 80px}}h2[_ngcontent-%COMP%]{margin-bottom:20px}.sub-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:space-between}@media (min-width: 768px){.sub-container[_ngcontent-%COMP%]{flex-direction:row}}.image-preview[_ngcontent-%COMP%]{display:flex;flex-direction:column}img[_ngcontent-%COMP%]{width:270px;height:300px;border-radius:20px;margin-bottom:20px}.hero-form[_ngcontent-%COMP%], .form-section[_ngcontent-%COMP%]{display:flex;flex-direction:column}form[_ngcontent-%COMP%]{width:100%;margin-top:20px}@media (min-width: 768px){form[_ngcontent-%COMP%]{margin:0 20px 0 0;width:calc(50% - 10px);height:350px}}form[_ngcontent-%COMP%]   .hero-form[_ngcontent-%COMP%]{border:1px solid lightgray;border-radius:10px;padding:20px}.description[_ngcontent-%COMP%]{margin-top:20px}@media (min-width: 600px){.description[_ngcontent-%COMP%]{left:80px;width:calc(100% - 190px);position:absolute}}@media (min-width: 768px){.description[_ngcontent-%COMP%]{margin-top:80px}}"]});let n=t;return n})();var Y=[{path:"",component:Q}],ve=(()=>{let t=class t{};t.\u0275fac=function(r){return new(r||t)},t.\u0275mod=M({type:t}),t.\u0275inj=w({imports:[P,L,v,J,j.forChild(Y)]});let n=t;return n})();export{ve as HeroFormModule};
