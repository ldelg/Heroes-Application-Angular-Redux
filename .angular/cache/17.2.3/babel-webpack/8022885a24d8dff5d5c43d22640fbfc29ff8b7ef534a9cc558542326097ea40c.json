{"ast":null,"code":"import _asyncToGenerator from \"C:/Users/me/Desktop/Heroes-SPA/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport { TestBed } from '@angular/core/testing';\nimport { ReactiveFormsModule, FormBuilder } from '@angular/forms';\nimport { ActivatedRoute, Router } from '@angular/router';\nimport { RouterTestingModule } from '@angular/router/testing';\nimport { HeroesFacade } from '../heroes-page/heroes-facade/heroes.facade';\nimport { HeroFormComponent } from './hero-form.component';\nimport { MatFormFieldModule, MatInputModule } from '@angular/material';\nimport { BrowserAnimationsModule } from '@angular/platform-browser/animations';\nimport { CUSTOM_ELEMENTS_SCHEMA } from '@angular/core';\ndescribe('HeroFormComponent', () => {\n  let component;\n  let fixture;\n  let router;\n  let heroesFacade;\n  beforeEach( /*#__PURE__*/_asyncToGenerator(function* () {\n    const heroesFacadeSpy = jasmine.createSpyObj('HeroesFacade', ['addNewHero', 'editHero']);\n    yield TestBed.configureTestingModule({\n      declarations: [HeroFormComponent],\n      imports: [ReactiveFormsModule, RouterTestingModule, MatFormFieldModule, MatInputModule, BrowserAnimationsModule // Needed for angular material components\n      ],\n      providers: [FormBuilder, {\n        provide: HeroesFacade,\n        useValue: heroesFacadeSpy\n      }, {\n        provide: ActivatedRoute,\n        useValue: {\n          snapshot: {\n            paramMap: {\n              get: () => 'testHero'\n            }\n          }\n        }\n      }],\n      schemas: [CUSTOM_ELEMENTS_SCHEMA] // Optional: only if you have custom elements that Angular doesn't recognize\n    }).compileComponents();\n    fixture = TestBed.createComponent(HeroFormComponent);\n    component = fixture.componentInstance;\n    router = TestBed.inject(Router);\n    heroesFacade = TestBed.inject(HeroesFacade);\n    spyOn(router, 'navigate');\n    fixture.detectChanges();\n  }));\n  it('should validate that name, power, and universe fields are required', () => {\n    component.heroForm.controls['name'].setValue('');\n    component.heroForm.controls['power'].setValue('');\n    component.heroForm.controls['universe'].setValue('');\n    expect(component.heroForm.valid).toBeFalsy();\n    component.heroForm.controls['name'].setValue('Batman');\n    component.heroForm.controls['power'].setValue('Rich');\n    component.heroForm.controls['universe'].setValue('DC');\n    expect(component.heroForm.valid).toBeTruthy();\n  });\n  describe('saveHero', () => {\n    it('should call addNewHero on submit in create mode', () => {\n      component.isEditMode = false;\n      component.saveHero();\n      expect(heroesFacade.addNewHero).toHaveBeenCalled();\n    });\n    it('should call editHero on submit in edit mode', () => {\n      component.isEditMode = true;\n      component.currentHero.name = 'Batman';\n      component.saveHero();\n      expect(heroesFacade.editHero).toHaveBeenCalledWith('Batman', component.heroForm.value);\n    });\n  });\n  it('should navigate to \"/heroes\" after saving', () => {\n    component.saveHero();\n    expect(router.navigate).toHaveBeenCalledWith(['/heroes']);\n  });\n});","map":{"version":3,"names":["TestBed","ReactiveFormsModule","FormBuilder","ActivatedRoute","Router","RouterTestingModule","HeroesFacade","HeroFormComponent","MatFormFieldModule","MatInputModule","BrowserAnimationsModule","CUSTOM_ELEMENTS_SCHEMA","describe","component","fixture","router","heroesFacade","beforeEach","_asyncToGenerator","heroesFacadeSpy","jasmine","createSpyObj","configureTestingModule","declarations","imports","providers","provide","useValue","snapshot","paramMap","get","schemas","compileComponents","createComponent","componentInstance","inject","spyOn","detectChanges","it","heroForm","controls","setValue","expect","valid","toBeFalsy","toBeTruthy","isEditMode","saveHero","addNewHero","toHaveBeenCalled","currentHero","name","editHero","toHaveBeenCalledWith","value","navigate"],"sources":["C:\\Users\\me\\Desktop\\Heroes-SPA\\src\\navbar-pages\\hero-form\\hero-form.component.spec.ts"],"sourcesContent":["import { ComponentFixture, TestBed } from '@angular/core/testing';\r\nimport { ReactiveFormsModule, FormBuilder } from '@angular/forms';\r\nimport { ActivatedRoute, Router } from '@angular/router';\r\nimport { RouterTestingModule } from '@angular/router/testing';\r\nimport { HeroesFacade } from '../heroes-page/heroes-facade/heroes.facade';\r\nimport { HeroFormComponent } from './hero-form.component';\r\nimport { MatFormFieldModule, MatInputModule } from '@angular/material';\r\nimport { BrowserAnimationsModule } from '@angular/platform-browser/animations';\r\nimport { CUSTOM_ELEMENTS_SCHEMA } from '@angular/core';\r\n\r\ndescribe('HeroFormComponent', () => {\r\n  let component: HeroFormComponent;\r\n  let fixture: ComponentFixture<HeroFormComponent>;\r\n  let router: Router;\r\n  let heroesFacade: jasmine.SpyObj<HeroesFacade>;\r\n\r\n  beforeEach(async () => {\r\n    const heroesFacadeSpy = jasmine.createSpyObj('HeroesFacade', ['addNewHero', 'editHero']);\r\n\r\n    await TestBed.configureTestingModule({\r\n      declarations: [HeroFormComponent],\r\n      imports: [\r\n        ReactiveFormsModule,\r\n        RouterTestingModule,\r\n        MatFormFieldModule,\r\n        MatInputModule,\r\n        BrowserAnimationsModule // Needed for angular material components\r\n      ],\r\n      providers: [\r\n        FormBuilder,\r\n        { provide: HeroesFacade, useValue: heroesFacadeSpy },\r\n        {\r\n          provide: ActivatedRoute,\r\n          useValue: { snapshot: { paramMap: { get: () => 'testHero' } } },\r\n        },\r\n      ],\r\n      schemas: [CUSTOM_ELEMENTS_SCHEMA] // Optional: only if you have custom elements that Angular doesn't recognize\r\n    }).compileComponents();\r\n\r\n    fixture = TestBed.createComponent(HeroFormComponent);\r\n    component = fixture.componentInstance;\r\n    router = TestBed.inject(Router);\r\n    heroesFacade = TestBed.inject(HeroesFacade) as jasmine.SpyObj<HeroesFacade>;\r\n    spyOn(router, 'navigate');\r\n    fixture.detectChanges();\r\n  });\r\n\r\n  it('should validate that name, power, and universe fields are required', () => {\r\n    component.heroForm.controls['name'].setValue('');\r\n    component.heroForm.controls['power'].setValue('');\r\n    component.heroForm.controls['universe'].setValue('');\r\n    expect(component.heroForm.valid).toBeFalsy();\r\n\r\n    component.heroForm.controls['name'].setValue('Batman');\r\n    component.heroForm.controls['power'].setValue('Rich');\r\n    component.heroForm.controls['universe'].setValue('DC');\r\n    expect(component.heroForm.valid).toBeTruthy();\r\n  });\r\n\r\n  describe('saveHero', () => {\r\n    it('should call addNewHero on submit in create mode', () => {\r\n      component.isEditMode = false;\r\n      component.saveHero();\r\n      expect(heroesFacade.addNewHero).toHaveBeenCalled();\r\n    });\r\n\r\n    it('should call editHero on submit in edit mode', () => {\r\n      component.isEditMode = true;\r\n      component.currentHero.name = 'Batman';\r\n      component.saveHero();\r\n      expect(heroesFacade.editHero).toHaveBeenCalledWith('Batman', component.heroForm.value);\r\n    });\r\n  });\r\n\r\n  it('should navigate to \"/heroes\" after saving', () => {\r\n    component.saveHero();\r\n    expect(router.navigate).toHaveBeenCalledWith(['/heroes']);\r\n  });\r\n});\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}