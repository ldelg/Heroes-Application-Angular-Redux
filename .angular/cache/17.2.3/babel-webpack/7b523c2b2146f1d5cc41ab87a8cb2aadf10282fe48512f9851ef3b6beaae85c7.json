{"ast":null,"code":"import { __decorate } from \"tslib\";\nimport __NG_CLI_RESOURCE__0 from \"./hero-form.component.html?ngResource\";\nimport __NG_CLI_RESOURCE__1 from \"./hero-form.component.css?ngResource\";\nimport { Component } from '@angular/core';\nimport { FormBuilder, Validators } from '@angular/forms';\nimport { ActivatedRoute, Router } from '@angular/router';\nimport { HeroesFacade } from '../heroes-page/heroes-facade/heroes.facade';\nimport { FormFields } from '../../constants/hero-form.constant';\nlet HeroFormComponent = class HeroFormComponent {\n  constructor(fb, route, router, heroesFacade) {\n    this.fb = fb;\n    this.route = route;\n    this.router = router;\n    this.heroesFacade = heroesFacade;\n    this.isEditMode = false;\n    this.uploadedImageUrl = 'https://cliparts.co/cliparts/Aib/raq/AibraqG8T.jpg';\n    this.FormFields = FormFields;\n    this.currentHero = {\n      name: '',\n      power: '',\n      universe: '',\n      image: '',\n      description: ''\n    };\n  }\n  ngOnInit() {\n    const heroName = this.route.snapshot.paramMap.get('name');\n    if (heroName) {\n      this.isEditMode = true;\n      this.currentHero = this.heroesFacade.getSelectedHero(heroName);\n      this.initializeForm(this.currentHero);\n    } else {\n      this.initializeForm();\n    }\n  }\n  initializeForm(hero) {\n    this.heroForm = this.fb.group({\n      name: [hero?.name || '', Validators.required],\n      power: [hero?.power || '', Validators.required],\n      universe: [hero?.universe || '', Validators.required],\n      image: [hero?.image || this.uploadedImageUrl],\n      description: [hero?.description || '']\n    });\n  }\n  onFileChanged(event) {\n    let reader = new FileReader();\n    const input = event.target;\n    if (input.files && input.files.length > 0) {\n      let file = input.files[0];\n      reader.onload = () => {\n        const imageUrl = reader.result;\n        this.heroForm.patchValue({\n          image: imageUrl\n        });\n        this.uploadedImageUrl = imageUrl;\n      };\n      reader.readAsDataURL(file);\n    }\n  }\n  saveHero() {\n    if (this.heroForm.valid) {\n      const formValue = this.heroForm.value;\n      if (this.isEditMode) {\n        this.heroesFacade.editHero(this.currentHero.name, formValue);\n      } else {\n        this.heroesFacade.addNewHero(formValue);\n      }\n      this.router.navigate(['/heroes']);\n    }\n  }\n  static #_ = this.ctorParameters = () => [{\n    type: FormBuilder\n  }, {\n    type: ActivatedRoute\n  }, {\n    type: Router\n  }, {\n    type: HeroesFacade\n  }];\n};\nHeroFormComponent = __decorate([Component({\n  selector: 'hero-form',\n  template: __NG_CLI_RESOURCE__0,\n  styles: [__NG_CLI_RESOURCE__1]\n})], HeroFormComponent);\nexport { HeroFormComponent };","map":{"version":3,"names":["Component","FormBuilder","Validators","ActivatedRoute","Router","HeroesFacade","FormFields","HeroFormComponent","constructor","fb","route","router","heroesFacade","isEditMode","uploadedImageUrl","currentHero","name","power","universe","image","description","ngOnInit","heroName","snapshot","paramMap","get","getSelectedHero","initializeForm","hero","heroForm","group","required","onFileChanged","event","reader","FileReader","input","target","files","length","file","onload","imageUrl","result","patchValue","readAsDataURL","saveHero","valid","formValue","value","editHero","addNewHero","navigate","_","__decorate","selector","template","__NG_CLI_RESOURCE__0"],"sources":["C:\\Users\\me\\Desktop\\Heroes-SPA\\src\\navbar-pages\\hero-form\\hero-form.component.ts"],"sourcesContent":["import { Component, OnInit } from '@angular/core';\r\nimport { FormGroup, FormBuilder, Validators } from '@angular/forms';\r\nimport { ActivatedRoute, Router } from '@angular/router';\r\nimport { Hero } from '../../models/hero.model';\r\nimport { HeroesFacade } from '../heroes-page/heroes-facade/heroes.facade';\r\nimport { FormFields } from '../../constants/hero-form.constant';\r\nimport { FormFieldsStructure } from '../../models/hero-form.model';\r\n\r\n@Component({\r\n  selector: 'hero-form',\r\n  templateUrl: './hero-form.component.html',\r\n  styleUrls: ['./hero-form.component.css'],\r\n})\r\nexport class HeroFormComponent implements OnInit {\r\n  public heroForm!: FormGroup;\r\n  public isEditMode: boolean = false;\r\n  public uploadedImageUrl: string =\r\n    'https://cliparts.co/cliparts/Aib/raq/AibraqG8T.jpg';\r\n  public FormFields: FormFieldsStructure = FormFields;\r\n  public currentHero: Hero = {\r\n    name: '',\r\n    power: '',\r\n    universe: '',\r\n    image: '',\r\n    description: '',\r\n  };\r\n\r\n  constructor(\r\n    private fb: FormBuilder,\r\n    private route: ActivatedRoute,\r\n    private router: Router,\r\n    private heroesFacade: HeroesFacade\r\n  ) {}\r\n\r\n  public ngOnInit(): void {\r\n    const heroName = this.route.snapshot.paramMap.get('name');\r\n    if (heroName) {\r\n      this.isEditMode = true;\r\n      this.currentHero = this.heroesFacade.getSelectedHero(heroName);\r\n      this.initializeForm(this.currentHero);\r\n    } else {\r\n      this.initializeForm();\r\n    }\r\n  }\r\n\r\n  private initializeForm(hero?: Hero): void {\r\n    this.heroForm = this.fb.group({\r\n      name: [hero?.name || '', Validators.required],\r\n      power: [hero?.power || '', Validators.required],\r\n      universe: [hero?.universe || '', Validators.required],\r\n      image: [hero?.image || this.uploadedImageUrl],\r\n      description: [hero?.description || ''],\r\n    });\r\n  }\r\n\r\n  public onFileChanged(event: Event): void {\r\n    let reader = new FileReader();\r\n    const input = event.target as HTMLInputElement;\r\n\r\n    if (input.files && input.files.length > 0) {\r\n      let file = input.files[0];\r\n\r\n      reader.onload = () => {\r\n        const imageUrl = reader.result as string;\r\n        this.heroForm.patchValue({ image: imageUrl });\r\n        this.uploadedImageUrl = imageUrl;\r\n      };\r\n\r\n      reader.readAsDataURL(file);\r\n    }\r\n  }\r\n\r\n  public saveHero(): void {\r\n    if (this.heroForm.valid) {\r\n      const formValue = this.heroForm.value;\r\n      if (this.isEditMode) {\r\n        this.heroesFacade.editHero(this.currentHero.name, formValue);\r\n      } else {\r\n        this.heroesFacade.addNewHero(formValue);\r\n      }\r\n      this.router.navigate(['/heroes']);\r\n    }\r\n  }\r\n}\r\n"],"mappings":";;;AAAA,SAASA,SAAS,QAAgB,eAAe;AACjD,SAAoBC,WAAW,EAAEC,UAAU,QAAQ,gBAAgB;AACnE,SAASC,cAAc,EAAEC,MAAM,QAAQ,iBAAiB;AAExD,SAASC,YAAY,QAAQ,4CAA4C;AACzE,SAASC,UAAU,QAAQ,oCAAoC;AAQxD,IAAMC,iBAAiB,GAAvB,MAAMA,iBAAiB;EAc5BC,YACUC,EAAe,EACfC,KAAqB,EACrBC,MAAc,EACdC,YAA0B;IAH1B,KAAAH,EAAE,GAAFA,EAAE;IACF,KAAAC,KAAK,GAALA,KAAK;IACL,KAAAC,MAAM,GAANA,MAAM;IACN,KAAAC,YAAY,GAAZA,YAAY;IAhBf,KAAAC,UAAU,GAAY,KAAK;IAC3B,KAAAC,gBAAgB,GACrB,oDAAoD;IAC/C,KAAAR,UAAU,GAAwBA,UAAU;IAC5C,KAAAS,WAAW,GAAS;MACzBC,IAAI,EAAE,EAAE;MACRC,KAAK,EAAE,EAAE;MACTC,QAAQ,EAAE,EAAE;MACZC,KAAK,EAAE,EAAE;MACTC,WAAW,EAAE;KACd;EAOE;EAEIC,QAAQA,CAAA;IACb,MAAMC,QAAQ,GAAG,IAAI,CAACZ,KAAK,CAACa,QAAQ,CAACC,QAAQ,CAACC,GAAG,CAAC,MAAM,CAAC;IACzD,IAAIH,QAAQ,EAAE;MACZ,IAAI,CAACT,UAAU,GAAG,IAAI;MACtB,IAAI,CAACE,WAAW,GAAG,IAAI,CAACH,YAAY,CAACc,eAAe,CAACJ,QAAQ,CAAC;MAC9D,IAAI,CAACK,cAAc,CAAC,IAAI,CAACZ,WAAW,CAAC;IACvC,CAAC,MAAM;MACL,IAAI,CAACY,cAAc,EAAE;IACvB;EACF;EAEQA,cAAcA,CAACC,IAAW;IAChC,IAAI,CAACC,QAAQ,GAAG,IAAI,CAACpB,EAAE,CAACqB,KAAK,CAAC;MAC5Bd,IAAI,EAAE,CAACY,IAAI,EAAEZ,IAAI,IAAI,EAAE,EAAEd,UAAU,CAAC6B,QAAQ,CAAC;MAC7Cd,KAAK,EAAE,CAACW,IAAI,EAAEX,KAAK,IAAI,EAAE,EAAEf,UAAU,CAAC6B,QAAQ,CAAC;MAC/Cb,QAAQ,EAAE,CAACU,IAAI,EAAEV,QAAQ,IAAI,EAAE,EAAEhB,UAAU,CAAC6B,QAAQ,CAAC;MACrDZ,KAAK,EAAE,CAACS,IAAI,EAAET,KAAK,IAAI,IAAI,CAACL,gBAAgB,CAAC;MAC7CM,WAAW,EAAE,CAACQ,IAAI,EAAER,WAAW,IAAI,EAAE;KACtC,CAAC;EACJ;EAEOY,aAAaA,CAACC,KAAY;IAC/B,IAAIC,MAAM,GAAG,IAAIC,UAAU,EAAE;IAC7B,MAAMC,KAAK,GAAGH,KAAK,CAACI,MAA0B;IAE9C,IAAID,KAAK,CAACE,KAAK,IAAIF,KAAK,CAACE,KAAK,CAACC,MAAM,GAAG,CAAC,EAAE;MACzC,IAAIC,IAAI,GAAGJ,KAAK,CAACE,KAAK,CAAC,CAAC,CAAC;MAEzBJ,MAAM,CAACO,MAAM,GAAG,MAAK;QACnB,MAAMC,QAAQ,GAAGR,MAAM,CAACS,MAAgB;QACxC,IAAI,CAACd,QAAQ,CAACe,UAAU,CAAC;UAAEzB,KAAK,EAAEuB;QAAQ,CAAE,CAAC;QAC7C,IAAI,CAAC5B,gBAAgB,GAAG4B,QAAQ;MAClC,CAAC;MAEDR,MAAM,CAACW,aAAa,CAACL,IAAI,CAAC;IAC5B;EACF;EAEOM,QAAQA,CAAA;IACb,IAAI,IAAI,CAACjB,QAAQ,CAACkB,KAAK,EAAE;MACvB,MAAMC,SAAS,GAAG,IAAI,CAACnB,QAAQ,CAACoB,KAAK;MACrC,IAAI,IAAI,CAACpC,UAAU,EAAE;QACnB,IAAI,CAACD,YAAY,CAACsC,QAAQ,CAAC,IAAI,CAACnC,WAAW,CAACC,IAAI,EAAEgC,SAAS,CAAC;MAC9D,CAAC,MAAM;QACL,IAAI,CAACpC,YAAY,CAACuC,UAAU,CAACH,SAAS,CAAC;MACzC;MACA,IAAI,CAACrC,MAAM,CAACyC,QAAQ,CAAC,CAAC,SAAS,CAAC,CAAC;IACnC;EACF;EAAC,QAAAC,CAAA,G;;;;;;;;;;AArEU9C,iBAAiB,GAAA+C,UAAA,EAL7BtD,SAAS,CAAC;EACTuD,QAAQ,EAAE,WAAW;EACrBC,QAAA,EAAAC,oBAAyC;;CAE1C,CAAC,C,EACWlD,iBAAiB,CAsE7B","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}